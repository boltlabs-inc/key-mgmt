# Lock Keeper Interactive Client

The Lock Keeper Interactive Client (`lkic`) is a basic implementation of the Lock Keeper client that allows for quick testing and troubleshooting.
It provides an interactive terminal with commands for each of the API functions exposed by the `lock_keeper_client::LockKeeperClient` type.
Key information is associated with simple names so that it can be easily referenced in the future.

## Usage

Start the server with `cargo make start`, then run the client with `cargo make lkic`.

Note that this tool is built using the current code from the `lock-keeper-client` crate. This makes it useful for testing changes to the client
but it also means that it will break alongside the client crate.


## Commands
To see this list in the application, type `help` in the `lkic` prompt.

```
Enter a command at the prompt. The prompt will display `|` if you are logged out and `>` if you are logged in.

command: register [account_name] [password]
aliases: reg
description: Registers a new account with the given account_name and password

command: authenticate [account_name] [password]
aliases: auth, a, login
description: Authenticates to a previously registered account. Authentication is required for most commands.

command: generate [key_name (optional)]
aliases: gen, g
description: Generate a new key. If you provide a name, the key can be referenced by that name. 
             If you don't provide a name, the key can be referenced by the number printed to the screen after generation.

command: retrieve [key_name]
aliases: ret, r
description: Retrieve a previously generated key from the key server and update local storage.

command: print [key_name]
aliases: p
description: Prints all stored information about the given key.

command: help
aliases: h
description: Prints help text.

command: quit
aliases: q, exit
description: Quits the application
```

## Examples

Register a new user:
```
| register testUser GreatPassword1
Logged in to testUser
```

Generate some keys:
```
> generate 
Stored: 1
> generate
Stored: 2
```

Generate a key with a custom name:
```
> generate myFavoriteKey
Stored: myFavoriteKey
```

Print a key with an autogenerated name:
```
> print 2
name: 2
key_id: KeyId([41, 180, 126, 137, 185, 98, 167, 3, 221, 247, 201, 251, 87, 99, 139, 114, 200, 16, 239, 150, 130, 150, 115, 73, 49, 213, 220, 252, 145, 56, 137, 189])
data: ArbitraryKey(LocalStorage { secret: Secret(Secret { material: [74, 146, 180, 96, 62, 85, 99, 48, 251, 62, 157, 245, 28, 236, 15, 214, 35, 51, 110, 86, 10, 245, 73, 183, 135, 11, 32, 39, 9, 37, 249, 20], context: AssociatedData([86, 101, 114, 115, 105, 111, 110, 32, 48, 46, 50, 46, 51, 99, 98, 100, 48, 55, 101, 50, 45, 49, 57, 101, 51, 45, 52, 102, 51, 53, 45, 54, 55, 51, 54, 45, 100, 102, 50, 54, 99, 50, 101, 50, 101, 50, 51, 52, 41, 180, 126, 137, 185, 98, 167, 3, 221, 247, 201, 251, 87, 99, 139, 114, 200, 16, 239, 150, 130, 150, 115, 73, 49, 213, 220, 252, 145, 56, 137, 189, 99, 108, 105, 101, 110, 116, 45, 103, 101, 110, 101, 114, 97, 116, 101, 100]) }) })
```

Print a key with a custom name:
``` 
> print myFavoriteKey
name: myFavoriteKey
key_id: KeyId([145, 110, 233, 206, 180, 239, 97, 245, 159, 4, 230, 17, 226, 108, 173, 163, 178, 145, 240, 63, 112, 8, 9, 248, 16, 250, 112, 104, 224, 110, 225, 101])
data: ArbitraryKey(LocalStorage { secret: Secret(Secret { material: [143, 169, 240, 142, 125, 61, 132, 108, 227, 46, 51, 211, 8, 24, 135, 195, 104, 112, 143, 244, 65, 235, 126, 233, 87, 220, 167, 65, 100, 163, 2, 161], context: AssociatedData([86, 101, 114, 115, 105, 111, 110, 32, 48, 46, 50, 46, 51, 99, 98, 100, 48, 55, 101, 50, 45, 49, 57, 101, 51, 45, 52, 102, 51, 53, 45, 54, 55, 51, 54, 45, 100, 102, 50, 54, 99, 50, 101, 50, 101, 50, 51, 52, 145, 110, 233, 206, 180, 239, 97, 245, 159, 4, 230, 17, 226, 108, 173, 163, 178, 145, 240, 63, 112, 8, 9, 248, 16, 250, 112, 104, 224, 110, 225, 101, 99, 108, 105, 101, 110, 116, 45, 103, 101, 110, 101, 114, 97, 116, 101, 100]) }) })
```

Retrieve a key
```
> retrieve myFavoriteKey
Updated: myFavoriteKey
```

Print updated key (it's the same):
``` 
> print myFavoriteKey
name: myFavoriteKey
key_id: KeyId([145, 110, 233, 206, 180, 239, 97, 245, 159, 4, 230, 17, 226, 108, 173, 163, 178, 145, 240, 63, 112, 8, 9, 248, 16, 250, 112, 104, 224, 110, 225, 101])
data: ArbitraryKey(LocalStorage { secret: Secret(Secret { material: [143, 169, 240, 142, 125, 61, 132, 108, 227, 46, 51, 211, 8, 24, 135, 195, 104, 112, 143, 244, 65, 235, 126, 233, 87, 220, 167, 65, 100, 163, 2, 161], context: AssociatedData([86, 101, 114, 115, 105, 111, 110, 32, 48, 46, 50, 46, 51, 99, 98, 100, 48, 55, 101, 50, 45, 49, 57, 101, 51, 45, 52, 102, 51, 53, 45, 54, 55, 51, 54, 45, 100, 102, 50, 54, 99, 50, 101, 50, 101, 50, 51, 52, 145, 110, 233, 206, 180, 239, 97, 245, 159, 4, 230, 17, 226, 108, 173, 163, 178, 145, 240, 63, 112, 8, 9, 248, 16, 250, 112, 104, 224, 110, 225, 101, 99, 108, 105, 101, 110, 116, 45, 103, 101, 110, 101, 114, 97, 116, 101, 100]) }) })
```

List all keys for the logged in user:
```
> list
name: 2
key_id: KeyId([41, 180, 126, 137, 185, 98, 167, 3, 221, 247, 201, 251, 87, 99, 139, 114, 200, 16, 239, 150, 130, 150, 115, 73, 49, 213, 220, 252, 145, 56, 137, 189])
data: ArbitraryKey(LocalStorage { secret: Secret(Secret { material: [74, 146, 180, 96, 62, 85, 99, 48, 251, 62, 157, 245, 28, 236, 15, 214, 35, 51, 110, 86, 10, 245, 73, 183, 135, 11, 32, 39, 9, 37, 249, 20], context: AssociatedData([86, 101, 114, 115, 105, 111, 110, 32, 48, 46, 50, 46, 51, 99, 98, 100, 48, 55, 101, 50, 45, 49, 57, 101, 51, 45, 52, 102, 51, 53, 45, 54, 55, 51, 54, 45, 100, 102, 50, 54, 99, 50, 101, 50, 101, 50, 51, 52, 41, 180, 126, 137, 185, 98, 167, 3, 221, 247, 201, 251, 87, 99, 139, 114, 200, 16, 239, 150, 130, 150, 115, 73, 49, 213, 220, 252, 145, 56, 137, 189, 99, 108, 105, 101, 110, 116, 45, 103, 101, 110, 101, 114, 97, 116, 101, 100]) }) })


name: myFavoriteKey
key_id: KeyId([145, 110, 233, 206, 180, 239, 97, 245, 159, 4, 230, 17, 226, 108, 173, 163, 178, 145, 240, 63, 112, 8, 9, 248, 16, 250, 112, 104, 224, 110, 225, 101])
data: ArbitraryKey(LocalStorage { secret: Secret(Secret { material: [143, 169, 240, 142, 125, 61, 132, 108, 227, 46, 51, 211, 8, 24, 135, 195, 104, 112, 143, 244, 65, 235, 126, 233, 87, 220, 167, 65, 100, 163, 2, 161], context: AssociatedData([86, 101, 114, 115, 105, 111, 110, 32, 48, 46, 50, 46, 51, 99, 98, 100, 48, 55, 101, 50, 45, 49, 57, 101, 51, 45, 52, 102, 51, 53, 45, 54, 55, 51, 54, 45, 100, 102, 50, 54, 99, 50, 101, 50, 101, 50, 51, 52, 145, 110, 233, 206, 180, 239, 97, 245, 159, 4, 230, 17, 226, 108, 173, 163, 178, 145, 240, 63, 112, 8, 9, 248, 16, 250, 112, 104, 224, 110, 225, 101, 99, 108, 105, 101, 110, 116, 45, 103, 101, 110, 101, 114, 97, 116, 101, 100]) }) })


name: 1
key_id: KeyId([101, 29, 172, 114, 124, 37, 210, 176, 134, 72, 177, 45, 155, 121, 244, 130, 208, 144, 249, 54, 231, 215, 98, 150, 249, 10, 64, 106, 88, 168, 195, 159])
data: ArbitraryKey(LocalStorage { secret: Secret(Secret { material: [156, 28, 241, 197, 243, 47, 80, 134, 229, 235, 135, 84, 89, 25, 106, 221, 215, 110, 0, 199, 163, 209, 143, 249, 223, 146, 140, 180, 126, 239, 239, 97], context: AssociatedData([86, 101, 114, 115, 105, 111, 110, 32, 48, 46, 50, 46, 51, 99, 98, 100, 48, 55, 101, 50, 45, 49, 57, 101, 51, 45, 52, 102, 51, 53, 45, 54, 55, 51, 54, 45, 100, 102, 50, 54, 99, 50, 101, 50, 101, 50, 51, 52, 101, 29, 172, 114, 124, 37, 210, 176, 134, 72, 177, 45, 155, 121, 244, 130, 208, 144, 249, 54, 231, 215, 98, 150, 249, 10, 64, 106, 88, 168, 195, 159, 99, 108, 105, 101, 110, 116, 45, 103, 101, 110, 101, 114, 97, 116, 101, 100]) }) })
```

Quit:
```
> exit
```

### Future Work
- Read commands from a file for easily repeatable testing
- Interactive help
