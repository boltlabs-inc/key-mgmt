# Lock Keeper Interactive Client

The Lock Keeper Interactive Client (`lkic`) is a basic implementation of the Lock Keeper client that allows for quick testing and troubleshooting.
It provides an interactive terminal with commands for each of the API functions exposed by the `lock_keeper_client::LockKeeperClient` type.
Key information is associated with simple names so that it can be easily referenced in the future.

## Usage

Start the server with `cargo make start`, then run the client with `cargo make lkic`.

Note that this tool is built using the current code from the `lock-keeper-client` crate. This makes it useful for testing changes to the client
but it also means that it will break alongside the client crate.


## Commands
To see this list in the application, type `help` in the `lkic` prompt.

```
Enter a command at the prompt. The prompt will display `|` if you are logged out and `>` if you are logged in.

command: register [account_name] [password]
aliases: reg
description: Registers a new account with the given account_name and password

command: authenticate [account_name] [password]
aliases: auth, a, login
description: Authenticates to a previously registered account. Authentication is required for most commands.

command: generate [key_name (optional)]
aliases: gen, g
description: Generate a new key. If you provide a name, the key can be referenced by that name. 
             If you don't provide a name, the key can be referenced by the number printed to the screen after generation.

command: retrieve [key_name]
aliases: ret, r
description: Retrieve a previously generated key from the key server and update local storage.

command: print [key_name]
aliases: p
description: Prints all stored information about the given key.

command: list
aliases: ls
description: Prints stored information about every key associated with the current account.

command: help
aliases: h
description: Prints help text.

command: quit
aliases: q, exit
description: Quits the application
```

## Examples

Register a new user:
```
| register testUser GreatPassword1
Logged in to testUser
```

Generate some keys:
```
> generate 
Stored: 1
> generate
Stored: 2
```

Generate a key with a custom name:
```
> generate myFavoriteKey
Stored: myFavoriteKey
```

Print a local key with an autogenerated name:
```
> print 2
name: 2
key_id: 29b47e89b962a703ddf7c9fb57638b72c810ef968296734931d5dcfc913889bd
data: Arbitrary Key - 4a92b4603e556330fb3e9df51cec0fd623336e560af549b7870b20270925f914
```

Print a local key with a custom name:
``` 
> print myFavoriteKey
name: myFavoriteKey
key_id: 916ee9ceb4ef61f59f04e611e26cada3b291f03f700809f810fa7068e06ee165
data: Arbitrary Key - 8fa9f08e7d3d846ce32e33d3081887c368708ff441eb7ee957dca74164a302a1
```

Retrieve a key and update local storage:
```
> retrieve myFavoriteKey
Retrieved: myFavoriteKey
key_id: 916ee9ceb4ef61f59f04e611e26cada3b291f03f700809f810fa7068e06ee165
data: Arbitrary Key - 8fa9f08e7d3d846ce32e33d3081887c368708ff441eb7ee957dca74164a302a1

Updated: myFavoriteKey
```

Print updated key (it's the same):
``` 
> print myFavoriteKey
name: myFavoriteKey
key_id: 916ee9ceb4ef61f59f04e611e26cada3b291f03f700809f810fa7068e06ee165
data: Arbitrary Key - 8fa9f08e7d3d846ce32e33d3081887c368708ff441eb7ee957dca74164a302a1
```

List all keys for the logged in user:
```
> list
name: 1
key_id: 651dac727c25d2b08648b12d9b79f482d090f936e7d76296f90a406a58a8c39f
data: Arbitrary Key - 9c1cf1c5f32f5086e5eb875459196addd76e00c7a3d18ff9df928cb47eefef61


name: myFavoriteKey
key_id: 916ee9ceb4ef61f59f04e611e26cada3b291f03f700809f810fa7068e06ee165
data: Arbitrary Key - 8fa9f08e7d3d846ce32e33d3081887c368708ff441eb7ee957dca74164a302a1


name: 2
key_id: 29b47e89b962a703ddf7c9fb57638b72c810ef968296734931d5dcfc913889bd
data: Arbitrary Key - 4a92b4603e556330fb3e9df51cec0fd623336e560af549b7870b20270925f914
```

Quit:
```
> exit
```

### Future Work
- Read commands from a file for easily repeatable testing
- Interactive help
